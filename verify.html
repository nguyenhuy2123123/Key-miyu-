<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X√°c th·ª±c Key MIYU</title>
<style>
  body {
    background: #0e0b16;
    font-family: 'Segoe UI', sans-serif;
    color: #fff;
    text-align: center;
    padding: 40px;
  }
  h1 { color: #d49eff; text-shadow: 0 0 10px #b166ff; }
  input {
    padding: 10px;
    width: 260px;
    border-radius: 8px;
    border: none;
    outline: none;
    margin-top: 20px;
    text-align: center;
    font-size: 16px;
  }
  button {
    background: linear-gradient(135deg, #b166ff, #ff66cc);
    border: none;
    color: white;
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 10px;
    box-shadow: 0 0 10px #b166ff;
  }
  button:hover { opacity: 0.9; }
  .msg {
    margin-top: 15px;
    font-size: 15px;
    color: #ccc;
  }
</style>
</head>
<body>
<h1>üîê X√°c th·ª±c Key MIYU</h1>
<p>Nh·∫≠p key c√≤n h·∫°n ƒë·ªÉ truy c·∫≠p n·ªôi dung ƒë·∫∑c bi·ªát</p>

<div id="verifyBox">
  <input type="text" id="userKey" placeholder="Nh·∫≠p key MIYU..." />
  <br>
  <button onclick="verifyKey()">X√°c nh·∫≠n</button>
  <div class="msg" id="msg"></div>
</div>

<script>
// ===== C·∫•u h√¨nh =====
const GITHUB_USERNAME = "nguyenhuy2123123"; // ‚Üê thay b·∫±ng t√™n GitHub c·ªßa b·∫°n
const REPO_NAME = "key-miyu-";
const FILE_PATH = "active_keys.txt";
const REDIRECT_URL = "https://www.mediafire.com/folder/j8o5x765anmgi/Key-miyu"; // ‚Üê trang web ƒë∆∞·ª£c truy c·∫≠p khi key h·ª£p l·ªá

// ===== Ki·ªÉm tra key ƒë√£ l∆∞u (n·∫øu c√≥) =====
window.addEventListener("load", () => {
  const savedKey = localStorage.getItem("miyu_valid_key");
  if(savedKey) {
    console.log("üîé ƒêang ki·ªÉm tra key ƒë√£ l∆∞u:", savedKey);
    checkKey(savedKey, true);
  }
});

async function verifyKey(){
  const key = document.getElementById("userKey").value.trim();
  if(!key){
    showMsg("‚ö†Ô∏è Vui l√≤ng nh·∫≠p key!");
    return;
  }
  await checkKey(key, false);
}

async function checkKey(key, isAutoCheck){
  showMsg("‚è≥ ƒêang ki·ªÉm tra key...");
  try {
    const url = `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${REPO_NAME}/main/${FILE_PATH}?t=${Date.now()}`;
    const res = await fetch(url);
    if(!res.ok) throw new Error("Kh√¥ng th·ªÉ t·∫£i danh s√°ch key.");
    const text = await res.text();
    const keys = text.split(/\r?\n/).map(k => k.trim()).filter(k => k.length > 0);

    if(keys.includes(key)){
      localStorage.setItem("miyu_valid_key", key);
      showMsg("‚úÖ Key h·ª£p l·ªá! ƒêang chuy·ªÉn h∆∞·ªõng...");
      setTimeout(() => window.location.href = REDIRECT_URL, 1200);
    } else {
      // N·∫øu l√† ki·ªÉm tra t·ª± ƒë·ªông => x√≥a key c≈©, b·∫Øt nh·∫≠p l·∫°i
      if(isAutoCheck){
        localStorage.removeItem("miyu_valid_key");
        showMsg("‚ùå Key ƒë√£ h·∫øt h·∫°n ho·∫∑c b·ªã x√≥a, vui l√≤ng nh·∫≠p l·∫°i.");
      } else {
        showMsg("‚ùå Key kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n.");
      }
    }
  } catch(e){
    console.error(e);
    showMsg("‚ö†Ô∏è L·ªói khi ki·ªÉm tra key.");
  }
}

function showMsg(txt){
  document.getElementById("msg").textContent = txt;
}
</script>
</body>
</html>
